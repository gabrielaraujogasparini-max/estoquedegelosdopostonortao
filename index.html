<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <link rel="icon" href="favicon.ico">

<meta charset="UTF-8">
<title>Estoque de Gelos - Posto Nortão</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Arial, Helvetica, sans-serif;
    background: #f1f4f9;
    margin: 0;
    padding: 15px;
}
.container {
    max-width: 420px;
    margin: auto;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    overflow: hidden;
}
.faixa-azul {
    background: #0057b7;
    color: #fff;
    text-align: center;
    padding: 18px;
    font-size: 20px;
    font-weight: bold;
}
.faixa-branca {
    height: 6px;
    background: #fff;
}
.faixa-vermelha {
    background: #c40000;
    color: #fff;
    text-align: center;
    padding: 8px;
    font-size: 13px;
}
.content {
    padding: 15px;
}
label {
    display: block;
    margin-top: 12px;
    font-weight: bold;
}
select, input {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    border-radius: 5px;
    border: 1px solid #ccc;
}
.estoque {
    margin-top: 15px;
    background: #eef3ff;
    padding: 12px;
    border-radius: 6px;
    text-align: center;
    font-weight: bold;
}
button {
    width: 100%;
    margin-top: 12px;
    padding: 12px;
    font-size: 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}
.btn-add { background: #2e8b57; color: #fff; }
.btn-baixa { background: #0057b7; color: #fff; }
.btn-fechar { background: #c40000; color: #fff; }
.footer {
    text-align: center;
    font-size: 12px;
    color: #666;
    padding: 10px;
}
</style>
</head>

<body>

<div class="container">
    <div class="faixa-azul">Estoque de Gelos</div>
    <div class="faixa-branca"></div>
    <div class="faixa-vermelha">Posto Nortão</div>

    <div class="content">

        <label>Responsável / Frentista</label>
        <select id="frentista">
            <option value="">Selecione</option>
            <option>Gabriel</option>
            <option>Robson</option>
            <option>Vinícius</option>
            <option>Vitor</option>
            <option>Alexsandro</option>
            <option>Tainara</option>
            <option>Dinho</option>
            <option>Ana Paula</option>
            <option>Genival</option>
            <option>Hakson</option>
            <option>Eduardo</option>
        </select>

        <label>Quantidade vendida</label>
        <input type="number" id="qtdVenda" min="1" placeholder="Ex: 5">

        <button class="btn-baixa" onclick="darBaixa()">Registrar venda</button>

        <label>Adicionar gelo ao estoque</label>
        <input type="number" id="qtdEntrada" placeholder="Ex: 20">

        <button class="btn-add" onclick="adicionarGelo()">Adicionar gelo</button>

        <div class="estoque">
            Estoque atual: <span id="estoque">0</span> gelos
        </div>

        <button class="btn-fechar" onclick="fecharTurno()">Fechar turno</button>

    </div>

    <div class="footer">
        Aplicativo criado por <strong>Gabriel Gasparini</strong>
    </div>
</div>

<script>
let estoque = parseInt(localStorage.getItem("estoqueGelo")) || 0;
let vendasTurno = JSON.parse(localStorage.getItem("vendasTurno")) || [];

document.getElementById("estoque").innerText = estoque;

/* ADICIONAR GELO */
function adicionarGelo() {
    const responsavel = document.getElementById("frentista").value;
    const qtd = parseInt(document.getElementById("qtdEntrada").value);
    if (!responsavel) return alert("Selecione o responsável.");
    if (!qtd || qtd <= 0) return alert("Quantidade inválida.");

    estoque += qtd;
    localStorage.setItem("estoqueGelo", estoque);
    document.getElementById("estoque").innerText = estoque;

    const agora = new Date();
    const msg =
`*ENTRADA DE GELO - POSTO NORTÃO*
*Responsável:* ${responsavel}
*Quantidade adicionada:* ${qtd}
*Estoque atual:* ${estoque}
*Data:* ${agora.toLocaleDateString("pt-BR")}
*Hora:* ${agora.toLocaleTimeString("pt-BR")}`;

    window.open("https://wa.me/?text=" + encodeURIComponent(msg), "_blank");
    document.getElementById("qtdEntrada").value = "";
}

/* VENDA */
function darBaixa() {
    const frentista = document.getElementById("frentista").value;
    const qtd = parseInt(document.getElementById("qtdVenda").value);
    if (!frentista) return alert("Selecione o frentista.");
    if (!qtd || qtd <= 0) return alert("Quantidade inválida.");
    if (qtd > estoque) return alert("Estoque insuficiente.");

    estoque -= qtd;
    const agora = new Date();

    vendasTurno.push({
        frentista,
        qtd,
        hora: agora.toLocaleTimeString("pt-BR")
    });

    localStorage.setItem("estoqueGelo", estoque);
    localStorage.setItem("vendasTurno", JSON.stringify(vendasTurno));
    document.getElementById("estoque").innerText = estoque;

    const msg =
`*VENDA DE GELO - POSTO NORTÃO*
*Frentista:* ${frentista}
*Quantidade vendida:* ${qtd}
*Estoque atual:* ${estoque}
*Data:* ${agora.toLocaleDateString("pt-BR")}
*Hora:* ${agora.toLocaleTimeString("pt-BR")}`;

    window.open("https://wa.me/?text=" + encodeURIComponent(msg), "_blank");
    document.getElementById("qtdVenda").value = "";
}

/* FECHAMENTO */
function fecharTurno() {
    if (vendasTurno.length === 0) {
        alert("Nenhuma venda registrada no turno.");
        return;
    }

    let resumo = `*FECHAMENTO DE TURNO - POSTO NORTÃO*\n\n`;
    let total = 0;

    vendasTurno.forEach(v => {
        total += v.qtd;
        resumo += `• ${v.frentista} vendeu ${v.qtd} gelos às ${v.hora}\n`;
    });

    resumo += `\n*Total vendido:* ${total}`;
    resumo += `\n*Estoque atual:* ${estoque}`;

    localStorage.removeItem("vendasTurno");
    vendasTurno = [];

    window.open("https://wa.me/?text=" + encodeURIComponent(resumo), "_blank");
}
</script>

</body>
</html>

